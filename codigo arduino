#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x3f, 20, 4);
int confirmar = 1;
int up = 2;
int down = 3;
int right = 4;
int left = 5;
int estado = 1;
int ponto = 0;
bool flag = false;
int aux = 0;
String botao;

void setup() {
    lcd.begin(20, 4);
    Serial.begin(9600);
    pinMode(confirmar, INPUT_PULLUP);
    pinMode(up, INPUT_PULLUP);
    pinMode(down, INPUT_PULLUP);
    pinMode(right, INPUT_PULLUP);
    pinMode(left, INPUT_PULLUP);
}

// Função para leitura dos botões
void lerBotoes() {
    botao = "vazio";

    if (digitalRead(right) == LOW) {
        botao = "Direita";
    } else if (digitalRead(up) == LOW) {
        botao = "Cima";
    } else if (digitalRead(down) == LOW) {
        botao = "Baixo";
    } else if (digitalRead(left) == LOW) {
        botao = "Esquerda";
    } else if (digitalRead(confirmar) == LOW) {
        botao = "Select";
    }
}

void loop() {
    lerBotoes();

    switch (estado) {
        case 1:
            ponto = 0;

            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("  Bem vindo ao");
            lcd.setCursor(0, 1);
            lcd.print("   JOGO QUIZ!");

            delay(3000);

            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print(" Use as Teclas");
            lcd.setCursor(0, 1);
            lcd.print("   UP e DOWN");

            delay(3000);

            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("Para escolher a");
            lcd.setCursor(0, 1);
            lcd.print("resposta correta");

            delay(3000);

            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("E a tecla LEFT");
            lcd.setCursor(0, 1);
            lcd.print("para retornar");

            delay(3000);

            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("Tecle SELECT p/");
            lcd.setCursor(0, 1);
            lcd.print("   confirmar");

            delay(3000);

            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("Iniciando o Jogo");
            lcd.setCursor(0, 1);
            lcd.print("   Boa Sorte!");

            delay(3000);

            estado = 2;

            break;

        case 2:
            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("Precione Select ");
            lcd.setCursor(0, 1);
            lcd.print("Para iniciar JOGO");

            if (botao == "Select") {
                estado = 110;
            } else if (botao != "vazio") {
                teclaError();
            }

            delay(200);
            break;

        case 110:
            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("Quiz 1:");
            lcd.setCursor(0, 1);
            lcd.print("O Cobra Kai eh um estilo de luta do(a):");

            delay(2000);

            for (int cont = 0; cont < 23; cont++) {
                lcd.scrollDisplayLeft();
                delay(200);
            }

            delay(2000);

            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("Karate ()");
            lcd.setCursor(0, 1);
            lcd.print("Capoeira ()");

            delay(200);
            estado = 111;
            aux = 0;

            break;

        case 111:
            lerBotoes();

            if (botao == "Cima") {
                lcd.clear();
                lcd.setCursor(0, 0);
                lcd.print("Karate (X)");
                lcd.setCursor(0, 1);
                lcd.print("Capoeira ()");

                flag = true;
                aux++;

            } else if (botao == "Baixo") {
                lcd.clear();
                lcd.setCursor(0, 0);
                lcd.print("Karate ()");
                lcd.setCursor(0, 1);
                lcd.print("Capoeira (X)");

                flag = false;
                aux++;

            } else if (botao == "Select") {
                if (aux != 0) {
                    if (flag == true) {
                        lcd.clear();
                        lcd.setCursor(0, 0);
                        lcd.print("Acertou - Uhuu!");
                        lcd.setCursor(0, 1);
                        lcd.print("Tem Netflix neh");

                        ponto++;
                        estado = 120;
                        delay(3000);
                    }

                    if (flag == false) {
                        lcd.clear();
                        lcd.setCursor(0, 0);
                        lcd.print("Errooouuuuu!!!");
                        lcd.setCursor(0, 1);
                        lcd.print("Era facil essa");

                        estado = 120;
                        delay(3000);
                    }
                } else {
                    lcd.clear();
                    lcd.setCursor(0, 0);
                    lcd.print("Voce pulou essa!!");
                    lcd.setCursor(0, 1);
                    lcd.print("Era taum facil!!!");

                    estado = 120;
                    delay(3000);
                }
            } else if (botao == "Esquerda") {
                estado = 110;
            } else if (botao != "vazio") {
                teclaError();
            }

            break;

        case 120:
            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("Quiz 2:");
            lcd.setCursor(0, 1);
            lcd.print("O Lula eh inocente?");

            delay(2000);

            for (int cont = 0; cont < 3; cont++) {
                lcd.scrollDisplayLeft();
                delay(200);
            }

            delay(2000);

            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("SIM ()");
            lcd.setCursor(0, 1);
            lcd.print("NAO ()");

            delay(200);
            estado = 121;
            aux = 0;

            break;

        case 121:
            lerBotoes();

            if (botao == "Cima") {
                lcd.clear();
                lcd.setCursor(0, 0);
                lcd.print("SIM (X)");
                lcd.setCursor(0, 1);
                lcd.print("NAO ()");

                flag = true;
                aux++;

            } else if (botao == "Baixo") {
                lcd.clear();
                lcd.setCursor(0, 0);
                lcd.print("SIM ()");
                lcd.setCursor(0, 1);
                lcd.print("NAO (X)");

                flag = false;
                aux++;

            } else if (botao == "Select") {
                if (aux != 0) {
                    if (flag == true) {
                        lcd.clear();
                        lcd.setCursor(0, 0);
                        lcd.print("Acertou! Vc");
                        lcd.setCursor(0, 1);
                        lcd.print("Esta Triste?");

                        ponto++;
                        estado = 4;
                        delay(3000);
                    }

                    if (flag == false) {
                        lcd.clear();
                        lcd.setCursor(0, 0);
                        lcd.print("Esse Jogo foi");
                        lcd.setCursor(0, 1);
                        lcd.print("Punido pelo STF");

                        estado = 4;
                        delay(3000);
                    }
                } else {
                    lcd.clear();
                    lcd.setCursor(0, 0);
                    lcd.print("Voce pulou essa!!");
                    lcd.setCursor(0, 1);
                    lcd.print("Era taum facil!!!");

                    estado = 4;
                    delay(3000);
                }
            } else if (botao == "Esquerda") {
                estado = 120;
            } else if (botao != "vazio") {
                teclaError();
            }

            break;

        case 4:
            lcd.clear();
            lcd.setCursor(0, 0);
            lcd.print("Total: ");
            lcd.setCursor(7, 0);
            lcd.print(ponto);
            lcd.setCursor(9, 0);
            lcd.print("Pto");

            if (ponto >= 1) {
                lcd.setCursor(0, 1);
                lcd.print("Muito Bom - MB");
            }

            if (ponto < 1) {
                lcd.setCursor(0, 1);
                lcd.print("Voce eh Burro ");
            }

            estado = 1;
            ponto = 0;

            delay(3000);

            break;
    }
}

void teclaError() {
    lcd.clear();
    lcd.setCursor(0, 0);
    lcd.print(" Tecla Errada!! ");
    delay(1000)
    ;}
    


